webpackJsonp([5],{"Sg+2":function(t,e,a){var n=a("2AZ7");n(n.S+n.F*!a("2gJQ"),"Object",{defineProperty:a("0hE2").f})},Vv5O:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"\n.header .el-input[data-v-174ffa56] {\n  width: 20%;\n}\n.pagination[data-v-174ffa56] {\n  text-align: right;\n  margin-top: 2rem;\n}\n",""])},a3Yh:function(t,e,a){"use strict";e.__esModule=!0;var n,i=a("liLe"),r=(n=i)&&n.__esModule?n:{default:n};e.default=function(t,e,a){return e in t?(0,r.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},aKM7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=a("a3Yh"),r=a.n(i),s=a("ocgh"),o=a("ceg5"),l=a("2sCs"),c=a.n(l),u=a("Y8t/"),d=(a("fYdz"),a("+AKB"),{data:function(){return{options:[],selectedOptions:[],list:null,listLoading:!0,searchKey:"",res:"",current_page:"",community_id:"",username:"",fenye:null}},created:function(){this.pageStart(),this.shuju()},activated:function(){this.pageStart(),this.selectedOptions=[]},methods:(n={handleChange2:function(t){var e=this;this.list=null,"quanbu"==t[0]&&(t[0]=""),this.fenye=t[0],c.a.get(this.URL+"/user?identity=1&community_id="+t[0]).then(function(t){0===t.data.code?(e.list=t.data.data.data,e._filter(e.list)):e.$message.error(t.data.status)}),u.a.get("/user?username=&identity=1&community_id="+this.fenye).then(function(t){0==t.code&&(e.res=t.data)})},shuju:function(){var t=this;this.options=[],c.a.get(this.URL+"/community").then(function(e){if(0===e.data.code)for(var a=0;a<e.data.data.length;a++)"admin"==t.username?t.options.push({value:e.data.data[a].id,label:e.data.data[a].community_name}):e.data.data[a].id==t.community_id&&t.options.push({value:e.data.data[a].id,label:e.data.data[a].community_name});else t.$message.error(e.data.status)}),this.options.unshift({value:"quanbu",label:"全部"})}},r()(n,"shuju",function(){var t=this;this.options=[],c.a.get(this.URL+"/community").then(function(e){if(0===e.data.code)for(var a=0;a<e.data.data.length;a++)"admin"==t.username?t.options.push({value:e.data.data[a].id,label:e.data.data[a].community_name}):e.data.data[a].id==t.community_id&&t.options.push({value:e.data.data[a].id,label:e.data.data[a].community_name});else t.$message.error(e.data.status)}),this.options.unshift({value:"quanbu",label:"全部"})}),r()(n,"pageStart",function(){this.storage.getStorage("uinfo").length>1?(this.community_id=JSON.parse(this.storage.getStorage("uinfo")).community_id,this.username=JSON.parse(this.storage.getStorage("uinfo")).username):this.community_id=-1,this.fetchData()}),r()(n,"fetchData",function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],"admin"==this.username?this.urls.user+"?identity=1&page=1&username="+e:this.urls.user+"?community_id="+this.community_id+"&identity=1&page=1&username="+e);this.listLoading=!0,Object(s.c)(a).then(function(e){t.res=e.data,t.list=e.data.data,t._filter(t.list),t.listLoading=!1})}),r()(n,"desingManager",function(t,e){var a=this,n=1;n=e&&"管理员"==e.authority?1:2,Object(s.a)(e.id).then(function(t){0===t.code&&Object(s.d)({id:t.data.id},n).then(function(){a.fetchData(a.searchKey,a.current_page)})})}),r()(n,"cancelManager",function(t,e){var a=this;Object(s.a)(e.id).then(function(t){0===t.code&&Object(s.d)(t.data,1).then(function(){a.fetchData(a.searchKey,a.current_page)})})}),r()(n,"handleCurrentChange",function(t){var e=this;this.fenye?u.a.get("/user?username=&identity=3&community_id="+this.fenye+"&page="+t).then(function(t){0==t.code&&(e.res=t.data,e.list=t.data.data,e._filter(e.list))}):(this.current_page=t,this.fetchData(this.searchKey,t))}),r()(n,"_searchKey",function(){this.$refs.pagination.internalCurrentPage=1,this.current_page=1,this.fetchData(this.searchKey)}),r()(n,"_filter",function(t){t.forEach(function(t){switch(t.marriage){case 1:t.marriage="未婚";break;case 2:t.marriage="已婚";break;case 3:t.marriage="离异";break;default:t.marriage="不详"}switch(t.record){case 1:t.record="小学";break;case 2:t.record="初中";break;case 3:t.record="高中";break;case 4:t.record="专科";break;case 5:t.record="本科";break;case 6:t.record="硕士";break;case 7:t.record="博士";break;case 8:t.record="博士以上";break;default:t.record="不详"}switch(t.validate){case 1:t.validate="未验证";break;default:t.validate="已验证"}switch(t.authentication){case 1:t.authentication="未认证";break;default:t.authentication="已认证"}switch(t.authority){case 1:t.authority="普通";break;case 2:t.authority="管理员";break;default:t.authority="超级管理员"}switch(t.verify){case 1:t.verify="未审核";break;case 2:t.verify="审核通过";break;default:t.verify="审核不通过"}switch(t.political){case 1:t.political="党员";break;case 2:t.political="团员";break;default:t.political="其它"}})}),r()(n,"_fileOut",function(t){Object(o.a)("#fileExport").execlExport("用户列表 - "+this.dateformat.format(new Date,"yyyy-MM-dd"),"operation")}),n)}),h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-header",{staticClass:"header"},[a("el-input",{attrs:{placeholder:"请输入内容(用户名)"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:function(e){t._searchKey()}}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.searchKey="",t._searchKey()}}},[t._v("取消")]),t._v(" "),a("el-cascader",{attrs:{size:"medium",options:t.options},on:{change:t.handleChange2},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t._fileOut}},[t._v("下载")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{id:"fileExport",data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"编号",width:"55"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.$index+1)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"用户名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.username)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"性别",width:"55",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.sex)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"身份证号",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.card)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"手机号",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.phone)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"社区",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.community_name)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"政治面貌",width:"auto",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.political)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"身份",width:"auto",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1==e.row.identity?"领导":2==e.row.identity?"工作人员":"普通居民")+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"审核",width:"auto",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.verify)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"权限",width:"auto",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.authority)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"积分",width:"auto",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.score)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220",align:"center","class-name":"operation"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{border:"none"},style:"管理员"==e.row.authority?"background-color:#e6a23c;":"background-color:#5daf34;",attrs:{size:"mini",type:"primary"},on:{click:function(a){t.desingManager(e.$index,e.row)}}},[t._v("\n            "+t._s("管理员"==e.row.authority?"取消管理员":"设为管理员")+"\n          ")])]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!=this.res.total,expression:"this.res.total==0?false:true"}],ref:"pagination",staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next","page-size":this.res.per_page,total:this.res.total,"current-page":this.res.current_page},on:{"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var f=a("vSla")(d,h,!1,function(t){a("zgM1")},"data-v-174ffa56",null);e.default=f.exports},liLe:function(t,e,a){t.exports={default:a("oAx8"),__esModule:!0}},oAx8:function(t,e,a){a("Sg+2");var n=a("/KQr").Object;t.exports=function(t,e,a){return n.defineProperty(t,e,a)}},zgM1:function(t,e,a){var n=a("Vv5O");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("45e3457e",n,!0)}});