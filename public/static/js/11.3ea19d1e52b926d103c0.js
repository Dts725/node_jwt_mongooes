webpackJsonp([11],{TW2V:function(e,t,i){var n=i("zsMu");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("8bSs")("e463ae68",n,!0)},kGU9:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Y8t/"),a=i("YrpF"),o=i("5VXh"),r=(i("ceg5"),i("fYdz"),i("+AKB"),{components:{list:a.a},data:function(){return{listLoading:!0,topBar:[{name:"新增",class:"",type:"success",keys:[],fun:this.newRole},{name:"搜索",key:"community_name",searchTipCon:"请输入搜索内容"}],canSelect:!0,indexBar:{name:"id",key:"id",width:"60"},thead:[{name:"社区名称",key:"community_name",width:""}],update:0,data:[{id:1,role:"街道管理员",date_time:1533195311304},{id:2,role:"社区管理员",date_time:1533195382959},{id:3,role:"办公职员",date_time:1533195391971}],actionBar:[{name:"编辑",fun:this.edit,type:"success"},{name:"删除",fun:this.delete,type:"danger"}],showDialog:!1,dialogTitle:"",dialogType:"",ruleForm:{name:"",id:"",is_bigdata:""},rules:{name:[{required:!0,message:"请输入社区名称",trigger:"blur"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"}]}}},created:function(){},activated:function(){this.getList(this.urls.community)},methods:{newRole:function(e,t){this.showDialog=!0,this.dialogTitle="新增社区",this.dialogType="new",this.initForm()},edit:function(e,t){this.showDialog=!0,this.dialogTitle="编辑社区",this.dialogType="edit",this.ruleForm.name=t.community_name,this.ruleForm.id=t.id},delete:function(e,t){var i=this;o.MessageBox.confirm("您确定删除此社区吗？","删除社区",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.sendData(i.urls.community+"/"+t.id,"","delete",function(e){0==e.code&&(Object(o.Message)({message:"删除成功！！！",duration:1500}),i.update++)})})},resetruleForm:function(e,t){this.showDialog=!1,this.initForm()},initForm:function(){this.ruleForm.name="",this.ruleForm.id=""},submitruleForm:function(e,t){var i=this,n=this,a="get",r=this.urls.community;this.$refs[e].validate(function(e){e&&("new"==t?a="post":"edit"==t&&(a="put",r=r+"/"+n.ruleForm.id),n.sendData(r,{community_name:n.ruleForm.name},a,function(e){0==e.code&&(Object(o.Message)({message:"new"==t?"新增成功！！！":"修改成功！！！",type:"success",duration:1500}),i.showDialog=!1,i.initForm(),i.update++)}))})},getList:function(e){var t=this;n.a.get(e).then(function(e){console.log("res:::",e),0==e.code&&(t.all_menu_ids=e.data.all_menu_ids)})},sendData:function(e,t,i,a){n.a.http(e,t,i).then(function(e){console.log("res:::",e),"function"==typeof a&&a(e)})}}}),s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("list",{attrs:{url:e.URL+"/community",update:e.update,topBar:e.topBar,canSelect:e.canSelect,indexBar:e.indexBar,thead:e.thead,actionBar:e.actionBar}}),e._v(" "),i("el-dialog",{attrs:{title:e.dialogTitle,dialogType:e.dialogType,visible:e.showDialog,center:""},on:{"update:visible":function(t){e.showDialog=t}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"社区名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入社区名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitruleForm("ruleForm",e.dialogType)}}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:function(t){e.resetruleForm("ruleForm")}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var l=i("vSla")(r,s,!1,function(e){i("TW2V")},"data-v-633f3df1",null);t.default=l.exports},zsMu:function(e,t,i){(e.exports=i("BkJT")(!1)).push([e.i,"\n.header .el-input[data-v-633f3df1] {\n  width: 20%;\n}\n.pagination[data-v-633f3df1] {\n  text-align: right;\n  margin-top: 2rem;\n}\n",""])}});